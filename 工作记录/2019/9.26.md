# 所属项目：全景分析健康管理系统

### 一、今日工作内容：

- 重要指标分布

  - 封装异常项弹出框，ztree组件所需数据格式已封装，添加以及更改sql为：

    ```sql
    -- 异常项选择==所有的体检项
    SELECT TJXM.UUID ID,KS.UUID PID,TJXM.NAME NAME
    FROM MEDICINE_TJXMMX XMMX
    INNER JOIN MEDICINE_TJXM TJXM ON TJXM.UUID=XMMX.TJXM_UUID
    INNER JOIN MEDICINE_TJXMLB KS ON KS.UUID=TJXM.TJXMLB_UUID
    WHERE XMMX.CENTER_UUID='8a0621a65a1bad9e015a1baf49280002' AND XMMX.STATUS = 'Y' 
    ORDER BY KS.IORDER,XMMX.IORDER
    
    -- 异常项父节点查询
    SELECT KS.UUID ID ,0 PID,KS.NAME NAME
    FROM MEDICINE_TJXMLB KS
    WHERE KS.UUID IN (SELECT TJXM.TJXMLB_UUID
    FROM  MEDICINE_TJXM TJXM,MEDICINE_TJXMMX XMMX 
    WHERE TJXM.UUID=XMMX.TJXM_UUID 
    AND XMMX.CENTER_UUID='8a0621a65a1bad9e015a1baf49280002' 
    AND XMMX.STATUS = 'Y' )
    ORER BY KS.IORDER
    ```

  

  - 实现z-tree组件的简单使用

  - 异常诊断接口实现

    ```sql
    -- 异常诊断统计查询
    SELECT COUNT(*) RC,ZDSJ.NAME,YCZD.ND
    FROM QJFX_YCZDRYB YCZD
    INNER JOIN MEDICINE_ZDSJ ZDSJ ON ZDSJ.UUID=YCZD.ZDSJ_UUID
    INNER JOIN HEALTH_USER U ON U.UUID=YCZD.USER_UUID
    WHERE YCZD.ZDSJ_UUID IN ('e544c3951cde4c1bb53049d194f77809','6007255b2e27474c8afc1c4704f03a34','9d9faaacbac647e7a2d014182b4c1804','ff8080816554749c016565a909110028') 
    AND YCZD.ND BETWEEN 2017 AND 2019
    AND U.SEX='1'  
    -- AND U.ZZQK='2'
    AND YCZD.ORG_UUID='ff8080816025436801602555d77d002c'
    GROUP BY YCZD.ZDSJ_UUID,ZDSJ.NAME,YCZD.ND
    
    ```

  - mib出现问题，待解决

    

### 二、相关技术积累：

#### 1、ztree 有两种数据类型，一种嵌套，一种id，pid

#### 2、ztree，setting可以做很多事情，官网比较全面

### 三、明日工作计划

- mib问题解决

- 页面开发

  